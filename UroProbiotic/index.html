<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>UroProbiotic - Oferta Especial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.0.0",
        "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.462.0"
      }
    }
    </script>
    <style>
      body { font-family: 'Inter', sans-serif; overflow-x: hidden; -webkit-font-smoothing: antialiased; }
      @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
      @keyframes shine { from { transform: translateX(-100%) skewX(-20deg); } to { transform: translateX(200%) skewX(-20deg); } }
      @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
      .animate-float { animation: float 5s ease-in-out infinite; }
      .animate-shine { position: absolute; top:0; left:0; width:50%; height:100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); animation: shine 3s infinite; pointer-events:none; }
      .marquee-container { width: 100%; overflow: hidden; white-space: nowrap; position: fixed; top: 0; left: 0; right: 0; display: flex; align-items: center; z-index: 100; }
      .marquee-content { display: flex; align-items: center; gap: 3rem; animation: marquee 20s linear infinite; width: max-content; }
      ::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>
    <script type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import * as Lucide from 'lucide-react';

        const LandingPage = () => {
            const [data, setData] = useState(null);
            const [timeLeft, setTimeLeft] = useState(600);
            const [selectedBundleId, setSelectedBundleId] = useState(null);

            useEffect(() => {
                fetch('./data.json')
                    .then(res => res.json())
                    .then(json => {
                        setData(json);
                        setTimeLeft(json.countdownMinutes * 60);
                        if (json.bundles?.length > 0) setSelectedBundleId(json.bundles[0].id);
                    })
                    .catch(err => console.error("Error cargando datos:", err));
            }, []);

            useEffect(() => {
                const timer = setInterval(() => setTimeLeft(t => t > 0 ? t - 1 : 0), 1000);
                return () => clearInterval(timer);
            }, []);

            if (!data) return null;

            const isColorDark = (hex) => {
                if (!hex) return false;
                const r = parseInt(hex.slice(1,3), 16), g = parseInt(hex.slice(3,5), 16), b = parseInt(hex.slice(5,7), 16);
                return (r * 299 + g * 587 + b * 114) / 1000 < 155;
            };

            const getStyles = () => {
                if (data.template === 'custom' && data.customTheme) return data.customTheme;
                const presets = {
                    vibrante: { bg: '#0a0118', accent: '#ff3d71', buttonBg: '#ff3d71', buttonText: '#ffffff' },
                    dark: { bg: '#000000', accent: '#c5a059', buttonBg: '#c5a059', buttonText: '#000000' },
                    minimalista: { bg: '#ffffff', accent: '#0f172a', buttonBg: '#0f172a', buttonText: '#ffffff' }
                };
                return presets[data.template] || presets.minimalista;
            };

            const styles = getStyles();
            const dark = isColorDark(styles.bg);
            const txt = dark ? 'text-white' : 'text-slate-900';
            const txtSec = dark ? 'text-white/70' : 'text-slate-500';

            return React.createElement('div', { 
              className: 'min-h-screen pb-40 w-full max-w-md mx-auto', 
              style: { backgroundColor: styles.bg, color: dark ? 'white' : 'black' } 
            }, [
                data.showPromoBanner && React.createElement('div', { 
                    className: 'marquee-container py-3 shadow-xl', 
                    style: { backgroundColor: styles.accent } 
                }, React.createElement('div', { className: 'marquee-content' }, 
                    [1,2,3,4,5].map(i => React.createElement('span', { key: i, className: 'text-[11px] font-black uppercase text-white tracking-widest' }, '⚡ ' + data.promoText))
                )),

                React.createElement('div', { className: 'px-8 pt-24' }, [
                    // Hero
                    React.createElement('div', { className: 'text-center mb-16' }, [
                        React.createElement('h1', { className: 'text-4xl font-black mb-6 leading-tight tracking-tighter ' + txt }, data.headline),
                        React.createElement('p', { className: 'text-lg font-medium mb-10 ' + txtSec }, data.subheadline),
                        data.productImage && React.createElement('div', { className: 'relative animate-float' }, [
                            React.createElement('img', { src: data.productImage, className: 'rounded-[3rem] shadow-2xl border-4 border-white/10 w-full aspect-square object-cover' }),
                            React.createElement('div', { 
                                className: 'absolute -bottom-4 -right-2 w-20 h-20 rounded-full flex flex-col items-center justify-center font-black rotate-12 shadow-xl',
                                style: { backgroundColor: styles.accent, color: isColorDark(styles.accent) ? 'white' : 'black' }
                            }, [
                                React.createElement('span', { className: 'text-[8px] opacity-80' }, 'OFERTA'),
                                React.createElement('span', { className: 'text-xl' }, '-' + Math.round((data.oldPrice - data.price)/data.oldPrice * 100) + '%')
                            ])
                        ])
                    ]),

                    // Urgency
                    data.showUrgencyBlock && React.createElement('div', { className: 'mb-16 p-8 rounded-[2.5rem] bg-rose-600 shadow-2xl text-center text-white' }, [
                        React.createElement('p', { className: 'text-[10px] font-black uppercase tracking-widest mb-2 opacity-80' }, data.urgencyText),
                        React.createElement('p', { className: 'text-2xl font-black' }, '¡Solo quedan ' + data.urgencyStock + ' unidades!')
                    ]),

                    // Bundles
                    data.showBundles && React.createElement('div', { className: 'mb-16 space-y-4' }, [
                        React.createElement('h3', { className: 'text-xl font-black mb-6 text-center uppercase ' + txt }, 'Selecciona tu Pack'),
                        data.bundles.map(b => React.createElement('div', {
                            key: b.id,
                            onClick: () => setSelectedBundleId(b.id),
                            className: 'p-6 rounded-[2rem] border-2 cursor-pointer transition-all ' + (selectedBundleId === b.id ? 'border-indigo-600 bg-indigo-50/10' : 'border-white/10 bg-white/5'),
                            style: selectedBundleId === b.id ? { borderColor: styles.accent } : {}
                        }, [
                            React.createElement('div', { className: 'flex justify-between items-center' }, [
                                React.createElement('div', null, [
                                    React.createElement('p', { className: 'font-black uppercase text-sm ' + txt }, b.name),
                                    React.createElement('p', { className: 'text-[10px] ' + txtSec }, b.quantity + ' Unidades')
                                ]),
                                React.createElement('p', { className: 'text-xl font-black ' + txt }, '$' + b.price)
                            ])
                        ]))
                    ]),

                    // Countdown
                    data.showCountdown && React.createElement('div', { className: 'mb-16 p-10 rounded-[3rem] bg-white/5 border border-white/10 text-center' }, [
                        React.createElement('p', { className: 'text-[10px] font-black uppercase mb-2 ' + txtSec }, 'Finaliza en:'),
                        React.createElement('p', { className: 'text-5xl font-black tracking-tighter ' + txt }, 
                            Math.floor(timeLeft/60).toString().padStart(2,'0') + ':' + (timeLeft%60).toString().padStart(2,'0')
                        )
                    ]),

                    // Sticky CTA
                    data.showStickyCTA && React.createElement('div', { className: 'fixed bottom-0 left-0 right-0 p-8 z-50 bg-gradient-to-t from-black/80 to-transparent pb-10' }, [
                        React.createElement('a', {
                            href: data.ctaUrl,
                            className: 'w-full max-w-md mx-auto py-6 rounded-full font-black uppercase tracking-widest text-center shadow-2xl flex items-center justify-center gap-3 relative overflow-hidden',
                            style: { backgroundColor: styles.buttonBg, color: styles.buttonText }
                        }, [
                            React.createElement('div', { className: 'animate-shine' }),
                            React.createElement('span', null, data.ctaText + ' — $' + (data.bundles.find(b=>b.id===selectedBundleId)?.price || data.price))
                        ])
                    ])
                ])
            ]);
        };

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(LandingPage));
    </script>
</body>
</html>